{% extends 'base.html.twig' %}

{% block body %}
<div class="span12">
	<form action="" method="post" id="eventForm">
		<label>Start Date</label>
		<input type="text" name="start_date" id="start_date">
		<label>Start Time</label>
		<input type="text" name="start_time" id="start_time" placeholder="hh:mm" style="width: 125px;"/>
		<select name="a" style="width: 75px;">
			<option value="a">AM</option>
			<option value="p">PM</option>
		</select>
		<label>Event Type</label>
		<select name="type" id="event_type">
			<option>Select an Event Type</option>
			<option value="100">Video Conference</option>
			<option value="101">Device Update</option>
		</select>
		<hr />
		
		<div class="formFields" id="ip-details" style="display: none">
			<label><span id="ipname">From IP</span></label><select name="fromIP" id="fromIP">
			<option>Select an IP</option>
			{% for device in devices %}
			<option value="{{device.id}}">{{device.ip}} | {{device.name}}</option>
			{% endfor %}
			</select>
		</div>
		<div class="formFields" id="details" >
		</div>
		<label>Notes</label>
		<textarea rows ="3"></textarea>
	</form>
</div>
{% endblock %}
{% block javascripts %}
{{parent()}}
<script type="text/javascript">
$(document).ready(function() {
	$('#start_date').datepicker();
	
	$('#event_type').change(function() {
		var formType = $('#event_type').val();
		var formArea = $('#details');
		
		$('#ip-details').css('display', 'block');
		if (formType == 100) //video conference
		{
			$('#ipname').text("From");
			details.innerHTML = 
			'<label>Calling</label><input type="text" name="calling" placeholder="ip1,ip2,ip3" />'
			;
		}
		else if (formType == 101) //device update
		{
			$('#ipname').text("Update");
			details.innerHTML = 
			'<label>Upgrade To</label><input type="text" name="updateTo" id="updateTo"/>'
			;
		}
	});
	var deviceTypes = new Object;
		{% for device in devices %}
			deviceTypes['{{device.id}}'] = {{device.model_id}};
		{% endfor %}
	$('#fromIP').change(function() {
		var id = $('#fromIP').val();
		console.log("Change!" + id);
		var model = deviceTypes[id]
		console.log("Model is: " + model);
		
		console.log(deviceTypes);
	});
});
</script>
<pre>
</pre>
{% endblock %}